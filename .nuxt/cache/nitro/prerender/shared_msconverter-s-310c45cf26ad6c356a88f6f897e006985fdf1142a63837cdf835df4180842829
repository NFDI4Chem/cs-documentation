{"id":"docs/4.msconverter-s3-enabled/2.installation.md","title":"Installation","body":{"type":"minimark","value":[["h1",{"id":"initial-step"},"Initial Step"],["p",{},"It is recommended to build three Docker images on your hosted machine for proper functionality.\nInside the docker_instance directory, you will find three subfolders:"],["ul",{},["li",{},["code",{},"main_workflow_docker"]," - orchestrates the other microservices"],["li",{},["code",{},"msconvert_docker"]," - handles MS file conversion"],["li",{},["code",{},"validation_docker"]," - performs data validation and file convert"]],["h1",{"id":"steps-of-installation"},"Steps of installation"],["tabs",{},["tabs-item",{"icon":"ri:install-fill","label":"Installation"},["p",{},"Steps for Docker Based Mass Spectrometry File Converter Installation"],["steps",{"level":"4"},["h4",{"id":"clone-the-repository"},"Clone the repository"],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"git clone https://github.com/NFDI4Chem/cs-ms-converter.git\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"git"],["span",{"class":"sfazB"}," clone"],["span",{"class":"sfazB"}," https://github.com/NFDI4Chem/cs-ms-converter.git\n"]]]],["h4",{"id":"go-inside-the-folder-msconverter-docker"},"Go inside the folder ",["code",{},"msconverter-docker"]],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"cd msconverter-docker\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"s2Zo4"},"cd"],["span",{"class":"sfazB"}," msconverter-docker\n"]]]],["blockquote",{},["p",{},"Before creating all the individual images please make sure that on ",["code",{},"credentials/.env"]," the ",["code",{},"s3-credentials"]," are filled. All of the images should be hainvg the same container name"]],["h4",{"id":"create-a-main-workflow-image"},"Create a main workflow image"],["p",{},"To build the main workflow image, navigate inside the main_workflow_docker directory and run the following command (replace ",["code",{},"main_api"]," with your desired image name if needed):"],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"docker build -t main_api  .\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"docker"],["span",{"class":"sfazB"}," build"],["span",{"class":"sfazB"}," -t"],["span",{"class":"sfazB"}," main_api"],["span",{"class":"sfazB"},"  .\n"]]]],["h4",{"id":"create-an-msconvert-image"},"Create an msconvert image"],["p",{},"To build the msconvert image, navigate inside the msconvert_docker directory and execute the following command:"],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"docker build -t msconvert_image  .\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"docker"],["span",{"class":"sfazB"}," build"],["span",{"class":"sfazB"}," -t"],["span",{"class":"sfazB"}," msconvert_image"],["span",{"class":"sfazB"},"  .\n"]]]],["h4",{"id":"create-a-validation-image"},"Create a validation image"],["p",{},"To build the validation image, navigate inside the msconvert_docker directory and run the following command:"],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"docker build -t validation_image  .\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"docker"],["span",{"class":"sfazB"}," build"],["span",{"class":"sfazB"}," -t"],["span",{"class":"sfazB"}," validation_image"],["span",{"class":"sfazB"},"  .\n"]]]]]]],["h1",{"id":"setup"},"Setup"],["tabs",{},["tabs-item",{"icon":"devicon:docker","label":"Docker Setup"},["p",{},"Once the Docker images have been successfully built, the next step is to launch containers for each service. Before doing so, it is recommended to create a dedicated Docker network to enable seamless communication between these containers."],["steps",{"level":"4"},["h4",{"id":"create-a-docker-network"},"Create a Docker Network"],["p",{},"Use the command below to create a custom network named ",["code",{},"my_network"]," (as example):"],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"docker network create my_network\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"docker"],["span",{"class":"sfazB"}," network"],["span",{"class":"sfazB"}," create"],["span",{"class":"sfazB"}," my_network\n"]]]],["h4",{"id":"creating-main-workflow-container"},"Creating main workflow container"],["p",{},"The ",["code",{},"main_workflow"]," container functions as the central orchestrator for the microservices. The command line is used to create a container called ",["code",{},"nfdi4chem-ms-main-workflow"]," with conditions mentioned above."],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"docker run -d -ti -p 5000:5000 --name nfdi4chem-ms-main-workflow --network my_network main_api\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"docker"],["span",{"class":"sfazB"}," run"],["span",{"class":"sfazB"}," -d"],["span",{"class":"sfazB"}," -ti"],["span",{"class":"sfazB"}," -p"],["span",{"class":"sfazB"}," 5000:5000"],["span",{"class":"sfazB"}," --name"],["span",{"class":"sfazB"}," nfdi4chem-ms-main-workflow"],["span",{"class":"sfazB"}," --network"],["span",{"class":"sfazB"}," my_network"],["span",{"class":"sfazB"}," main_api\n"]]]],["h4",{"id":"create-msconverter-container"},"Create msconverter container"],["p",{},"The ",["code",{},"msconvert"]," service is built upon the ",["a",{"href":"https://github.com/ProteoWizard/container","rel":["nofollow"]},"ProteWizard container"],", enhanced with added additional API endpoints to enable automated data conversion. It executes the standard msconvert command and accepts parameters as specified in the ",["a",{"href":"https://proteowizard.sourceforge.io/tools/msconvert.html","rel":["nofollow"]},"official documentation"],"."],["p",{},"Like the main workflow container, this service should be connected to a shared host directory and the my_network Docker network to enable file exchange and inter-container communication. âœ… It is recommended to name the container ",["code",{},"nfdi4chem-ms-msconvert"]," for consistent communication across the conatiner environment."],["p",{},"Launch the container with the following command:"],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"docker run -d -ti -p 4000:4000  --name nfdi4chem-ms-msconvert --network my_network msconvert_image\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"docker"],["span",{"class":"sfazB"}," run"],["span",{"class":"sfazB"}," -d"],["span",{"class":"sfazB"}," -ti"],["span",{"class":"sfazB"}," -p"],["span",{"class":"sfazB"}," 4000:4000"],["span",{"class":"sfazB"},"  --name"],["span",{"class":"sfazB"}," nfdi4chem-ms-msconvert"],["span",{"class":"sfazB"}," --network"],["span",{"class":"sfazB"}," my_network"],["span",{"class":"sfazB"}," msconvert_image\n"]]]],["h4",{"id":"create-validation-container"},"Create validation container"],["p",{},"The validation microservice is based on the official ",["a",{"href":"https://hub.docker.com/r/biocontainers/openms","rel":["nofollow"]},"OpenMS container"],", and has been extended with custom API endpoints to support validation of mzML files, as described in the ",["a",{"href":"https://openms.de/doxygen/release/2.5.0/html/TOPP_FileInfo.html","rel":["nofollow"]},"FileInfo documentation"],". Additionally, it incorporates functionality to correct or reprocess mzML files using ",["a",{"href":"https://openms.de/documentation/html/TOPP_FileConverter.html","rel":["nofollow"]},"FileConverter"],"."],["p",{},"ðŸš¨ For consistency and interoperability, it is recommended to name this container ",["code",{},"nfdi4chem-ms-validation"],"."],["p",{},"Following the same network setup as in Steps 1 and 2, the container can be launched using the command below"],["pre",{"className":"language-bash shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","code":"docker run -d -ti -p 3000:3000  --name nfdi4chem-ms-validation --network my_network validation_image\n","language":"bash","meta":"","style":""},["code",{"__ignoreMap":""},["span",{"class":"line","line":1},["span",{"class":"sBMFI"},"docker"],["span",{"class":"sfazB"}," run"],["span",{"class":"sfazB"}," -d"],["span",{"class":"sfazB"}," -ti"],["span",{"class":"sfazB"}," -p"],["span",{"class":"sfazB"}," 3000:3000"],["span",{"class":"sfazB"},"  --name"],["span",{"class":"sfazB"}," nfdi4chem-ms-validation"],["span",{"class":"sfazB"}," --network"],["span",{"class":"sfazB"}," my_network"],["span",{"class":"sfazB"}," validation_image\n"]]]]]]],["style",{},"html pre.shiki code .sBMFI, html code.shiki .sBMFI{--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B}html pre.shiki code .sfazB, html code.shiki .sfazB{--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s2Zo4, html code.shiki .s2Zo4{--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF}"]],"toc":{"title":"","searchDepth":1,"depth":2,"links":[]}},"description":"Mass Spectrometry File Converter.","extension":"md","links":null,"meta":{},"navigation":{"icon":"icon-park-outline:install"},"path":"/msconverter-s3-enabled/installation","seo":{"title":"Installation","description":"Mass Spectrometry File Converter."},"stem":"4.msconverter-s3-enabled/2.installation","__hash__":"dR1rf5g_8DYLO1I_vv9BJ8R0IWwe1uOE0LEPwOXbVkE"}